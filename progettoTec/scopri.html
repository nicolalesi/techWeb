<html>
    <head> 
        <title> Info sugli animali </title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <title> Info sugli animali </title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </head>
    <style>
         #container{
            display: flex;
            flex-direction: column;
         }
         #titolo{
            align-self: center;
         }
         #containerInfo{
            display:flex;
            justify-content: center;
         }
         #imgAnimale{
            width: 30vw;
            height: 50vh;
            margin-left: 40px;
         }
         p{
            font-size: 15px;
            font-family: 'Courier New', Courier, monospace;
         }
         #imgAnimale{
            display: none;
         }
         #button{
            height: 20%;
         }
    </style>
    <script>

        var  animalsInfo;

        function getInfo(){
			
            $.ajax({
                method: 'GET',
                url: 'https://api.api-ninjas.com/v1/animals?name=a',
                headers: { 'X-Api-Key': '6cuPFxMPEbTL/peOvztdzA==QKgsunYVjTstv41x'},
                contentType: 'application/json',
                success: function(result) {
                    console.log(result);
                    animalsInfo=result;
                    disegnaAnimale();
                },
                error: function ajaxError(jqXHR) {
                    console.error('Error: ', jqXHR.responseText);
                }
            });
		}
		getInfo();

        function disegnaAnimale(){

            var random=Math.floor(Math.random() * animalsInfo.length);


            infoJSON=animalsInfo[random];

            console.log(infoJSON.characteristics);
            var stringa=JSON.stringify(infoJSON.characteristics);
            var spl = stringa.split('",');
            console.log(spl);

            var div=document.getElementById("informazioni");
            div.innerHTML='';

            var nome=document.createElement("p");
            nome.innerHTML='"Name" : "'+infoJSON.name+'",';
            div.appendChild(nome);
            /*
            p.innerHTML=" <b> Name : </b> "+infoJSON.name;
            p.innerHTML+="<br/> <b> Color : </b> "+infoJSON.characteristics.color;
            p.innerHTML+="<br/> <b> Common name : </b> "+infoJSON.characteristics.common_name;
            p.innerHTML+="<br/> <b> Diet : </b> "+infoJSON.characteristics.diet;
            p.innerHTML+="<br/> <b> Length : </b>"+infoJSON.length;
            p.innerHTML+="<br/> <b> Lifespan : </b> "+infoJSON.lifespan;
            p.innerHTML+="<br/> <b> Litter Size : </b>"+infoJSON.litter_size;*/

            var j=0;

            for(let i=1;i<spl.length-1;i++){
                
                var p=document.createElement("p");
                p.innerHTML=spl[i]+'",';
               /* console.log(j);
                if(j>=4){
                    p.innerHTML+=spl[i]+'<br/>';
                    j=1;
                }
                else{
                    p.innerHTML+=spl[i];
                    j++;
                }*/

                console.log(spl[i]);
                spl[i].replace('"', "");
                div.appendChild(p);
                
            }

            
            var img=document.getElementById("imgAnimale");
            img.setAttribute("src",infoJSON.image_link);

        }

    function refresh(){
        disegnaAnimale();
    }
    </script>
    <body>
        <div class="card text-center">
            <div class="card-header ">
                <h3> Animal house</h3>
                <ul class="nav nav-tabs card-header-tabs" id="navbar">
                    <li class="nav-item">
                        <a class="nav-link" href="home.html">Home</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link active" href="scopri.html">Scopri nuovi animali</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="quiz.html">Quiz</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="curiosita.html">Curiosit√†</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="funFacts.html" tabindex="-1" aria-disabled="true">Funny and cutie images</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="login.html" tabindex="-1" aria-disabled="true" id="login">Login</a>
                    </li>
                    <li class="nav-item" id="areaPersonale">
                    <a class="nav-link" href="areaPersonale.html" tabindex="-1" aria-disabled="true" id="areaPersonale">Area personale</a>
                    </li>
                    <li class="nav-item" id="bacheca">
                    <a class="nav-link" href="bacheca.html" tabindex="-1" aria-disabled="true">Bacheca</a>    
                    </li>
                </ul>
            </div>    
        </div>
        <div id="container">
            <div id="containerInfo" class="mt-5">
                <div id="informazioni">
                </div>
                <img id="imgAnimale" class="img-thumbnail">
                <input type="button" onclick="refresh()" value="Nuovo animale" class="btn btn-primary" id="button"/>
            </div>
        </div>    
    </body>
</html>
<script>
    console.log(document.cookie);
    var test=document.cookie;
    console.log(test);
    if(document.cookie){

        if(document.cookie=="null"){
            document.getElementById("login").style.display="block";
            document.getElementById("areaPersonale").style.display="none";
        }
        else {
            document.getElementById("login").style.display="none";
            document.getElementById("areaPersonale").style.display="block";
        }
    }
    else{
        document.getElementById("login").style.display="block";
        document.getElementById("areaPersonale").style.display="none";
    }

    /*document.getElementById("login").style.display="block";
    document.getElementById("areaPersonale").style.display="block";*/

</script>